# The config recipe.
# https://rasa.com/docs/rasa/model-configuration/
recipe: default.v1

# The assistant project unique identifier
# This default value must be replaced with a unique assistant name within your deployment
assistant_id: placeholder_default

# Configuration for Rasa NLU.
# https://rasa.com/docs/rasa/nlu/components/
language: "ko"  # 한국어를 사용할 것을 명시

pipeline:
  - name: SpacyNLP  # SpaCy의 한국어 NLP 모델을 사용하여 기본적인 자연어 처리 수행
    model: "ko_core_news_sm"  # 한국어 모델을 지정
  - name: SpacyTokenizer  # SpaCy의 토크나이저를 사용하여 텍스트를 토큰(단어) 단위로 분리  
  - name: SpacyFeaturizer  # SpaCy에서 추출한 단어 임베딩을 특징으로 사용
  - name: RegexFeaturizer  # 정규 표현식을 사용하여 텍스트에서 특정 패턴을 인식하고 특징으로 사용
  - name: LexicalSyntacticFeaturizer  # 텍스트의 어휘적 및 구문적 패턴을 기반으로 특징을 생성
  - name: CountVectorsFeaturizer  # 텍스트의 단어 빈도(Count Vectors)를 기반으로 특징을 생성
  - name: CountVectorsFeaturizer  # 문자 n-그램(문자 수준의 특징)을 사용하여 추가적인 특징을 생성
    analyzer: "char_wb"  # 단어 경계 기준으로 문자 n-그램 생성
    min_ngram: 1  # 최소 n-그램 길이
    max_ngram: 4  # 최대 n-그램 
  - name: DIETClassifier  # Rasa의 기본 분류기, 인텐트와 엔티티를 학습
    epochs: 100  # 모델 학습을 위한 에폭 수
    constrain_similarities: true  # 유사한 인텐트 간의 유사성을 제한하여 모델이 더 분명하게 구분하도록 함
  - name: EntitySynonymMapper  # 엔티티의 동의어를 처리하여 동일한 의미의 다른 표현을 매핑
  - name: ResponseSelector  # 특정 질문에 대해 적절한 응답을 선택 (FAQ 챗봇 등에 유용)
    epochs: 100  # 모델 학습을 위한 에폭 수
    constrain_similarities: true  # 유사한 응답 간의 유사성을 제한하여 모델이 더 분명하게 구분하도록 함
  - name: FallbackClassifier  # 모델이 불확실할 때 기본 응답을 제공하여 잘못된 응답을 피함
    threshold: 0.4  # Fallback이 발생할 신뢰도 임계값
    ambiguity_threshold: 0.1  # 의문스러운 경우 Fallback이 발생할 신뢰도 차이 임계값

# Configuration for Rasa Core.
# https://rasa.com/docs/rasa/core/policies/
policies:
  - name: MemoizationPolicy  # 대화 기록을 기억하여 동일한 대화 흐름을 반복할 때 유용
  - name: RulePolicy  # 특정 규칙에 따라 대화 처리를 정의
  - name: UnexpecTEDIntentPolicy  # 예기치 않은 인텐트를 처리
    max_history: 5
    epochs: 100
  - name: TEDPolicy  # 복잡한 대화 흐름을 관리하는 데 유용
    max_history: 5
    epochs: 100
    constrain_similarities: true  # 유사한 응답 간의 유사성을 제한하여 더 정확한 응답을 제공
